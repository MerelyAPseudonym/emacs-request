[tox]
envlist = emacs

[testenv]
deps =
  virtualenv-emacs
  flask
  tornado
commands =
  virtualenv_install_emacs \
      --with-emacs="{env:BASEEMACS}" --with-env={envdir} --marmalade
  elpa-get deferred
  make test-3 EL4T_CARTON_EMACS=emacs

[testenv:emacs]

[testenv:emacs23]
setenv =
  BASEEMACS=emacs23

[testenv:emacs24]
setenv =
  BASEEMACS=emacs24

[testenv:emacs-snapshot]
setenv =
  BASEEMACS=emacs-snapshot
